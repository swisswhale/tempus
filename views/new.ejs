<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Add New Watch</title>

        <script>
        document.addEventListener("DOMContentLoaded", function() {
            const brandSelect = document.getElementById("brand");
            const otherBrandField = document.getElementById("otherBrand");

            function toggleOtherBrandField() {
                if (brandSelect.value === "Other") {
                    otherBrandField.style.display = "block";
                    otherBrandField.setAttribute("required", "required");
                } else {
                    otherBrandField.style.display = "none";
                    otherBrandField.removeAttribute("required");
                }
            }

            brandSelect.addEventListener("change", toggleOtherBrandField);
            toggleOtherBrandField();
        });
    </script>
    </head>
    <body>
        <h1>Add a New Watch</h1>

        <!-- âœ… Keep only one form -->
        <form action="/watches" method="POST">

            <h2>Basics</h2>

            <!--Brand-->
            <label for="brand">Brand:</label>
            <select name="brand" id="brand">
                <% brands.forEach(brand => { %>
                <option value="<%= brand %>"><%= brand %></option>
                <% }); %>
            </select>
            <input type="text" id="otherBrand" name="otherBrand"
                placeholder="Enter brand name" style="display: none;">

            <!--Model-->
            <label for="model">Model:</label>
            <input type="text" id="model" name="model" required>

            <!--Ref number-->
            <label for="referenceNumber">Reference Number:</label>
            <input type="text" id="referenceNumber" name="referenceNumber">

            <!--Gender-->
            <!--Serial Number-->

            <h2>Purchase Details</h2>

            <label for="purchasePrice">Purchase Price:</label>
            <input type="number" id="purchasePrice" name="purchasePrice" required>

            <label for="purchaseDate">Purchase Date:</label>
            <input type="date" id="purchaseDate" name="purchaseDate" required>

            <label for="seller">Seller:</label>
            <input type="text" id="seller" name="seller" required>

            <h2>Case</h2>

            <label for="caseMaterial">Case Material:</label>
            <select name="caseMaterial" id="caseMaterial">
                <% caseMaterials.forEach(material => { %>
                <option value="<%= material %>"><%= material %></option>
                <% }); %>
                </select>

                <h2>Strap/Bracelet</h2>
                <h2>Movement</h2>
                <h2>Function</h2>

                <h2>Notes</h2>

            <button type="submit">Add Watch</button>
        </form>

        <a href="/watches">Back to Watch List</a>
    </body>
</html>