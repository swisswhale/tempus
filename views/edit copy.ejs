<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Watch</title>
</head>

<body>
  <h1>Edit Watch</h1>

  <form action="/watches/<%= watch._id %>?_method=PUT" method="POST">
    <h2>Basics</h2>
    <label for="brand">Brand:</label>
    <select name="brand" id="brand">
      <% brands.forEach(brand => { %>
      <option value="<%= brand %>"><%= brand %></option>
      <% }); %>
    </select>
    <input type="text" id="otherBrand" name="otherBrand" placeholder="Enter brand name" style="display: none" />

    <label for="model">Model:</label>
    <input type="text" id="model" name="model" value="<%= watch.model %>" required />

    <label for="refNumber">Reference Number:</label>
    <input type="text" id="refNumber" name="refNumber" value="<%= watch.refNumber %>" />

    <label for="serialNumber">Serial Number:</label>
    <input type="text" id="serialNumber" name="serialNumber" value="<%= watch.serialNumber %>" />

    <label for="gender">Gender:</label>
    <div class="radio-group">
      <% ["Men's", "Women's", "Unisex"].forEach(genderOption => { %>
      <input type="radio" id="gender-<%= genderOption %>" name="gender" value="<%= genderOption %>" <%= watch.gender === genderOption ? "checked" : "" %> />
      <label for="gender-<%= genderOption %>"><%= genderOption %></label>
      <% }); %>
    </div>

    <h2>Purchase Details</h2>
    <label for="purchasePrice">Purchase Price:</label>
    <input type="number" id="purchasePrice" name="purchasePrice" value="<%= watch.purchasePrice %>" step="0.01" />

    <label for="purchaseDate">Purchase Date:</label>
    <input type="date" id="purchaseDate" name="purchaseDate" value="<%= watch.purchaseDate ? new Date(watch.purchaseDate).toISOString().split('T')[0] : '' %>" />

    <label for="seller">Seller:</label>
    <input type="text" id="seller" name="seller" value="<%= watch.seller %>" />

    <label>Original Box Included?</label>
    <input type="radio" id="boxYes" name="boxIncluded" value="true" <%= watch.boxIncluded === true ? "checked" : "" %> />
    <label for="boxYes">Yes</label>

    <input type="radio" id="boxNo" name="boxIncluded" value="false" <%= watch.boxIncluded === false ? "checked" : "" %> />
    <label for="boxNo">No</label>

    <label>Original Papers Included?</label>
    <input type="radio" id="papersYes" name="papersIncluded" value="true" <%= watch.papersIncluded === true ? "checked" : "" %> />
    <label for="papersYes">Yes</label>

    <input type="radio" id="papersNo" name="papersIncluded" value="false" <%= watch.papersIncluded === false ? "checked" : "" %> />
    <label for="papersNo">No</label>

    <h2>Case</h2>
    <label for="caseDiameter">Case Diameter (mm):</label>

    <input type="number" id="caseDiameter" name="caseDiameter" value="<%= watch.caseDiameter %>" />
    <label for="caseMaterial">Case Material:</label>
    <select name="caseMaterial">
      <option value selected disabled>-- Select Case Material --</option>
      <% caseMaterial.forEach(material => { %>
      <option value="<%= material %>" <%= watch.caseMaterial === material ? "selected" : "" %>><%= material %></option>
      <% }); %>
    </select>

    <label for="bezelMaterial">Bezel Material:</label>
    <select name="bezelMaterial">
      <option value selected disabled>-- Select a Bezel Material --</option>
      <% bezelMaterial.forEach(material => { %>
      <option value="<%= material %>" <%= watch.bezelMaterial === material ? "selected" : "" %>><%= material %></option>
      <% }); %>
    </select>

    <!--Diameter-->
    <label for="caseDiameter">Case Diameter (mm):</label>
    <input type="number" id="caseDiameter" name="caseDiameter" value="<%= watch.caseDiameter %>" />
    <!--Crystal-->
    <label for="crystalMaterial">Crystal Material:</label>
    <select name="crystalMaterial" id="crystalMaterial">
      <% crystalMaterial.forEach(material => { %>
      <option value="<%= material %>"><%= material %></option>
      <% }); %>
    </select>
    <!--Water Resistance-->
    <label for="waterResistance">Water Resistance (ATM):</label>
    <input type="number" id="waterResistance" name="waterResistance" vale="ATM" />

    <h2>Dial</h2>
    <!--Dial Style-->
    <label>Dial Style:</label>
    <div class="radio-group">
      <img src="images/dials/arabic-numerals.png" />
      <input type="radio" id="arabic" name="dialStyle" value="Arabic Numerals" />
      <label for="arabic">Arabic Numerals</label>

      <img src="images/dials/gemstones.png" />
      <input type="radio" id="gemstones" name="dialStyle" value="Gemstones" />
      <label for="gemstones">Gemstones</label>

      <img src="images/dials/lines.png" />
      <input type="radio" id="lines" name="dialStyle" value="Lines" />
      <label for="lines">Lines</label>

      <img src="images/dials/no-numerals.png" />
      <input type="radio" id="noNumerals" name="dialStyle" value="No Numerals" />
      <label for="noNumerals">No Numerals</label>

      <img src="images/dials/roman-numerals.png" />
      <input type="radio" id="roman" name="dialStyle" value="Roman Numerals" />
      <label for="roman">Roman Numerals</label>

      <img src="images/dials/other.png" />
      <input type="radio" id="other" name="dialStyle" value="Other" />
      <label for="other">Other</label>
    </div>
    <!--Dial Color-->
    <label for="dialColor">Dial Color/Finish:</label>
    <select name="dialColor" id="dialColor">
      <option value selected disabled>-- Select a Dial Color
        --</option>
      <!--Keeps first option in data set from defaulting-->
      <% dialColor.forEach(color => { %>
      <option value="<%= color %>"><%= color %></option>
      <% }); %>
    </select>

    <h2>Strap/Bracelet</h2>
    <!--Bracelet Material-->
    <select name="braceletMaterial" id="braceletMaterial">
      <option value selected disabled>-- Select Bracelet Material
        --</option>
      <% braceletMaterial.forEach(material => { %>
      <option value="<%= material %>"><%= material %></option>
      <% }); %>
    </select>

    <!--Bracelet Color-->
    <select name="braceletColor" id="braceletColor">
      <option value selected disabled>-- Select Bracelet Color
        --</option>
      <% braceletColor.forEach(color => { %>
      <option value="<%= color %>"><%= color %></option>
      <% }); %>
    </select>

    <h2>Movement</h2>
    <!--Movement-->
    <div class="radio-group">
      <% movement.forEach(movement => { %>
      <label>
        <input type="radio" name="movement" value="<%= movement %>">
        <%= movement %>
      </label>
      <% }); %>
    </div>

    <h2>Function</h2>
    <label>Watch Functions:</label>
    <ul>
      <% watchFunctions.forEach(func => { %>
      <input type="checkbox" name="watchFunctions[]" value="<%= func %>" <%= watch.watchFunctions.includes(func) ? "checked" : "" %> />
      <%= func %>
      <% }); %>
    </ul>

    <label>Special Features:</label>
    <ul>
      <% specialFeatures.forEach(feature => { %>
      <input type="checkbox" name="specialFeatures[]" value="<%= feature %>" <%= watch.specialFeatures.includes(feature) ? "checked" : "" %> />
      <%= feature %>
      <% }); %>
    </ul>

    <button type="submit">Update Watch</button>
  </form>

  <a href="/watches/<%= watch._id %>">Cancel</a>
</body>

</html>